doctype html
html(lang='en')
  head
    meta(charset='UTF-8')
    title Admin Dashboard
    link(rel='stylesheet', type='text/css', href='/css/styles.css')
    script(src="https://code.jquery.com/jquery-3.1.0.min.js",  integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=", crossorigin="anonymous")
  body
    #main
      .title
        h1 Dashboard
      br
      .ticketTable
        each val, index in json
          if index === 0
            .headrow.row
              .headColumn.col.ticketId
                | Ticket ID
              .headColumn.col.createdAt
                | Received
              .headColumn.col.address
                | Location
              .headColumn.col.description
                | Short Description
              .headColumn.col.status
                | Status
              .headColumn.col.username
                | Submitter
              .headColumn.col.phoneNumber
                | Phone #
              .headColumn.col.email
                | Email
              .headColumn.col.pictureCol
                | Picture
          else
            .row
              .col.ticketId
                | #{val.id}
              .col.createdAt
                | #{val.formatDate}
              .col.address
                | #{val.address}
              .col.description
                a.showDescription(href='/description/' + val.id)
                  | #{val.description}
              .col.status
                -var num = ["In Progress","Danger","Done"]
                if val.refferalStatus_id == 2
                  - num = ["Queue","Danger","Done"]
                else if val.refferalStatus_id == 3
                  - num = ["Queue","In Progress","Done"]
                else if val.refferalStatus_id == 4
                  - num = ["Queue","In Progress","Danger"]
                form(action='/homeless/' + val.id + "/?_method=put", method="post")
                  select(name="refferalStatus_id", onchange='this.form.submit()')
                    option(value="" disabled selected) #{val.refferalStatus.name}
                    option(value=num[0]) #{num[0]}
                    option(value=num[1]) #{num[1]}
                    option(value=num[2]) #{num[2]}
              .col.username
                | #{val.name}
              .col.phoneNumber
                | #{val.phoneNumber}
              .col.email
                | #{val.email}
              .col.pictureCol
                if val.pic_id === null
                  | N/A
                else
                  a(href="/homeless/" + val.id + "/photo")
                    | Picture
      br
      br
      br
      br
      br
      .mapInfo
        h2 Homeless Map Tracker
        .options-box
          .toggleContainer
            input#show-listings(type='button', value='Show Listings')
            input#hide-listings(type='button', value='Hide Listings')
        br
      .mapContainer
        #map
      br
      br
      script(type='text/javascript', src='/js/maps.js')
      script(async='', defer='', src='https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyCVY-LYZbEIkWbG78IjjFmBTRalFKfrIFg&v-3&callback=initMap')
